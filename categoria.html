<!DOCTYPE html>
<html lang="pt-br">
    <head>
        <meta charset="UTF-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1.0" />
        <title>Cadastrar Categoriqa - Sistema Lanhouse</title>
        <link rel="stylesheet" href="./css/categoria.css" />
    </head>
    <body>
        <header class="navbar">
            <div class="logo">
                <a href="./index.html">
                    <img src="./images/LogoSimplificada_cropped.png" alt="" />
                </a>
            </div>
            <nav class="nav-buttons">
                <ul>
                    <li><a href="./home.html">Home</a></li>
                    <li><a href="#">Cadastros</a></li>
                </ul>
            </nav>
            <div class="account-panel">
                <div class="profile-pic">
                    <img src="./images/userProfilePic.jpg" alt="" />
                </div>
                <div class="panel-text">
                    <span class="username">Usuário</span>
                    <a href="./login.html" class="sair">Sair</a>
                </div>
            </div>
        </header>
        <main>
            <div class="container">
                <h1 class="form-title">Cadastro de Categoria</h1>
                <form class="cadastro-form">
                    <div class="input-fields">
                        <div class="form-group">
                            <div class="input">
                                <label class="input-label" for="nome"
                                    >Nome</label
                                >
                                <input
                                    class="textbox"
                                    type="text"
                                    id="nome"
                                    name="nome"
                                />
                            </div>
                        </div>
                        <div class="form-group" style="flex: 1">
                            <div class="input" style="align-self: stretch">
                                <label class="input-label" for="nome"
                                    >Descrição</label
                                >
                                <textarea
                                    class="textbox"
                                    name="descricao"
                                    id="descricao"
                                    class="multilineTextbox"
                                ></textarea>
                            </div>
                        </div>
                    </div>
                    <button
                        type="button"
                        class="primary-button"
                        onclick="location.href = './home.html'"
                    >
                        Cadastrar
                    </button>
                </form>
            </div>
        </main>
        <script>
            function allowOnlyCurrency(e) {
                const key = e.key;
                const inputField = e.target;
                const currentValue = inputField.value;

                // Permitir botões Tab e Apagar
                if (key === 'Backspace' || key === 'Tab') {
                    return;
                }

                // BLOQUEAR digitar se já estiver completo o formato de salário
                // REGEX: essa expressão verifica se o valor digitado termina com uma virgula (ou ponto) e duas casas decimais
                // Se quiser entender mais, pergunte ao ChatGPT "Me explique o REGEX /[,.]\d{2}$/g"
                if (/[,.]\d{2}$/g.test(currentValue)) {
                    e.preventDefault();
                    return;
                }

                // Permitir uma virgula ou ponto se não já estiver presente
                if (key === ',' || key === '.') {
                    const temPonto = currentValue.includes('.');
                    const temVirgula = currentValue.includes(',');
                    if (!temPonto && !temVirgula) {
                        return;
                    }
                }

                // Permitir números
                if (!isNaN(key)) {
                    return;
                }

                e.preventDefault();
            }
            document
                .getElementById('salario')
                .addEventListener('keypress', allowOnlyCurrency);
        </script>
    </body>
</html>
